package org.example;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;
import org.testng.Assert;
import org.testng.annotations.Test;

import java.time.Duration;

public class AddRemoveCartTest {

    @Test
    public void addCart() {
        System.setProperty(
                "webdriver.chrome.driver",
                "D:\\Git\\practicMaventest1\\src\\test\\resources\\webdriver\\chromedriver.exe");

        WebDriver webDriver = new ChromeDriver();

        webDriver.get("https://www.amazon.com/");
        webDriver.manage().window().maximize();

        WebElement openCategory =
                webDriver.findElement(By.xpath("//div[2]/div/div/a/div/img"));
        openCategory.click();

        WebElement item =
                webDriver.findElement(By.xpath("//*[@class = \"a-section aok-relative s-image-fixed-height\"]/*[@data-image-index = \"1\"]"));
        item.click();

        WebElement addCart =
                webDriver.findElement(By.xpath("//*[@id=\"add-to-cart-button\"]"));
        addCart.click();

        WebElement addInformationLabel = new WebDriverWait(webDriver, Duration.ofSeconds(10))
                .until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//*[@class = \"a-size-medium-plus a-color-base sw-atc-text a-text-bold\"]")));
        Assert.assertEquals("Added to Cart", addInformationLabel.getText());

        WebElement addInformationLabel2 = new WebDriverWait(webDriver, Duration.ofSeconds(10))
                .until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//*[@id=\"nav-cart-count\"]")));
        Assert.assertEquals("1", addInformationLabel2.getText());

        webDriver.close();
        webDriver.quit();

    }


    @Test
    public void deleteCart() {
        System.setProperty(
                "webdriver.chrome.driver",
                "D:\\Git\\practicMaventest1\\src\\test\\resources\\webdriver\\chromedriver.exe");

        WebDriver webDriver = new ChromeDriver();

        webDriver.get("https://www.amazon.com/");
        webDriver.manage().window().maximize();

        WebElement openCategory =
                webDriver.findElement(By.xpath("//div[2]/div/div/a/div/img"));
        openCategory.click();

        WebElement item =
                webDriver.findElement(By.xpath("//*[@class = \"a-section aok-relative s-image-fixed-height\"]/*[@data-image-index = \"1\"]"));
        item.click();

        WebElement addCart =
                webDriver.findElement(By.xpath("//*[@id=\"add-to-cart-button\"]"));
        addCart.click();

        WebElement opencart =
                webDriver.findElement(By.xpath("//*[@id = \"nav-cart\"]"));
        opencart.click();

        WebElement delCart =
                webDriver.findElement(By.cssSelector(".sc-action-delete .a-color-link"));
        delCart.click();

        WebElement delInformationLabel = new WebDriverWait(webDriver, Duration.ofSeconds(10))
                .until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//*[@class = \"a-spacing-mini a-spacing-top-base\"]")));
        Assert.assertEquals("Your Amazon Cart is empty.", delInformationLabel.getText());

        WebElement cartInformationLabel2 = new WebDriverWait(webDriver, Duration.ofSeconds(10))
                .until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//*[@id=\"nav-cart-count\"]")));
        Assert.assertEquals("0", cartInformationLabel2.getText());

        webDriver.close();
        webDriver.quit();
    }
}
